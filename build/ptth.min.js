!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("ptth",[],e):"object"==typeof exports?exports.ptth=e():t.ptth=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports
var i=r[n]={exports:{},id:n,loaded:!1}
return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={}
return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict"
var n=r(1).default
t.exports=n},function(t,e,r){"use strict"
function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t
var e={}
if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])
return e.default=t,e}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t){return new b(t)}Object.defineProperty(e,"__esModule",{value:!0})
var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r]
n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r(2),h=i(u),c=r(3),l=n(c),d=Object.create(null),f=!0,p=Object.create(null)
p["Content-Type"]=p.Accept=h.types.json
var v=[],y=[],b=function(){function t(e){return s(this,t),this._url=e||!1,this._data=Object.create(null),this.headers=h.extend(Object.create(null),p,d),this.parameters=Object.create(null),this.parser=null,this.beforeStack=[],this.stack=[],this._reqWithHeader=!!f,this}return o(t,[{key:"header",value:function(t,e){if(h.isObject(t))h.forIn(t,function(t,e){this.header(t,e)},this)
else{if(1==arguments.length)return!!this.headers[t]&&this.headers[t]
e===!1?delete this.headers[t]:this.headers[t]=h.types[e]||e}return this}},{key:"using",value:function(t,e){var r=this
if(t&&!e){if(h.isObject(t)){var n=!0
return h.forIn(t,function(t,e){n=!!r.headers[t]&&r.headers[t]==(h.types[e]||e)}),n}return!!this.headers[t]}return!(!t||!e)&&(!!this.headers[t]&&this.headers[t]==(h.types[e]||e))}},{key:"url",value:function(t){return this._url=t,this}},{key:"type",value:function(t){return arguments.length?(this.header("Content-Type",h.types[t]||t),this):this.header("Content-Type")}},{key:"accept",value:function(t){return arguments.length?(this.header("Accept",h.types[t]||t),this):this.header("Accept")}},{key:"enableReqWithHeader",value:function(){return this._reqWithHeader=!0,this}},{key:"disableReqWithHeader",value:function(){return this._reqWithHeader=!1,this}},{key:"params",value:function(t,e){return h.isObject(t)?h.forIn(t,function(t,e){this.params(t,e)},this):this.parameters[t]=e,this}},{key:"parse",value:function(t){return this.parser=t,this}},{key:"before",value:function(t,e){return h.isFunction(t)&&(e=t,t=null),this.beforeStack.push({method:t,handle:e}),this}},{key:"use",value:function(t,e){return h.isFunction(t)&&(e=t,t=null),this.stack.push({method:t,handle:e}),this}},{key:"reset",value:function(){return this.headers=Object.create(null),this.parameters=Object.create(null),this.beforeStack=[],this.stack=[],this._data=Object.create(null),this}},{key:"data",value:function(t,e){if(h.isObject(t)&&h.isObject(this._data))this._data=h.extend(this._data,t)
else if(h.isString(t))if(e)this._data[t]=e
else for(var r=t.split("&"),n=0,i=r.length;n<i;n++){var s=r[n]
s=s.split("="),this._data[s[0]]=s[1]}else this._data=t
return this}},{key:"urlContains",value:function(t){return h.stringContains(this._url,t)}},{key:"startMiddleware",value:function(t,e,r,n){function i(){var n=t[s++]
if(n)return n.method&&e!=n.method?i():void h.callMiddleware(n.handle,r,i)}var s=0
i(),n&&n()}},{key:"abort",value:function(){return this.xhr&&this.xhr.abort(),this.aborted=!0,this}},{key:"get",value:function(t,e){var r="GET"
return this.end(r,t,e),this}},{key:"post",value:function(t,e){var r="POST"
return this.end(r,t,e),this}},{key:"put",value:function(t,e){var r="PUT"
return this.end(r,t,e),this}},{key:"patch",value:function(t,e){var r="PATCH"
return this.end(r,t,e),this}},{key:"head",value:function(t,e){var r="HEAD"
return this.end(r,t,e),this}},{key:"remove",value:function(t,e){var r="DELETE"
return this.end(r,t,e),this}},{key:"options",value:function(t,e){var r="OPTIONS"
return this.end(r,t,e),this}},{key:"end",value:function(t,e,r){var n=this
delete this.aborted
var i=this,s=Array.prototype.concat.call(new Array,y,this.stack),a=this.xhr=h.getXHR(),o=this.parameters,u=this.type()
if(this.method=t.toLowerCase(),h.isFunction(e))if(h.isString(r)){var c=e
e=r,r=c}else r=e
h.isString(e)&&(this._url=e)
var d=h.objectSize(o)?h.setParams(this._url,o):this._url,p=h.serializers[u]
if((this._reqWithHeader===!0||this._reqWithHeader!==!1&&f===!0)&&this.header("X-Requested-With","XMLHttpRequest"),a.onreadystatechange=function(){if(4===this.readyState){if(!i.aborted){var t=new l.default(i.method,a,i)
r&&h.isFunction(r)&&s.push({handle:r}),i.startMiddleware(s,i.method,t)}delete i.xhr}},this.before(function(){var t=h.objectSize(n._data)&&h.methodShouldHavePayload(n.method)?n._data:null
p&&null!=t&&(t=p(t)),u==h.types.form&&"get"!=n.method&&"head"!=n.method&&(d+="?"+t,t=null),a.open(n.method.toUpperCase(),d,!0),h.setHeaders(a,n.headers),a.send(t)}),!this.aborted){var b=Array.prototype.concat.call(new Array,v,this.beforeStack)
return this.startMiddleware(b,this.method,i,function(){n.beforeStack.pop(),n.parameters=Object.create(null),n._data=Object.create(null)}),this}}}]),t}()
a.before=function(t,e){h.isFunction(t)&&(e=t,t=null),v.push({method:t,handle:e})},a.use=function(t,e){h.isFunction(t)&&(e=t,t=null),y.push({method:t,handle:e})},a.header=function(t,e){if(h.isObject(t))h.forIn(t,function(t,e){b.header(t,e)})
else{if(1==arguments.length)return!!globalheaders[t]&&globalheaders[t]
e===!1?delete globalheaders[t]:globalheaders[t]=h.types[e]||e}},a.enableReqWithHeader=function(){f=!0},a.disableReqWithHeader=function(){f=!1},a.reset=function(){d=Object.create(null),f=!0},a.Request=b,a.Response=l.default,e.default=a},function(t,e){"use strict"
function r(t){return _.test(t)}function n(t){throw new Error(t)}function i(t){return Object.prototype.toString.call(t)}function s(t){return"[object Object]"===i(t)}function a(t){return t&&"function"==typeof t}function o(t){return"[object String]"===i(t)}function u(t){if(!s(t))return t
var e=[]
for(var r in t)null!==t[r]&&e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]))
return e.join("&")}function h(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function c(t){for(var e=1,r=arguments.length;e<r;e++){var n=arguments[e]
for(var i in n)h(n,i)&&(t[i]=n[i])}return t}function l(t,e,r){r=r||t
for(var n in t)h(t,n)&&e.call(r,n,t[n])}function d(t){var e=0,r=void 0
for(r in t)h(t,r)&&e++
return e}function f(t,e){return t.slice(-e.length)==e}function p(t,e){return~t.indexOf(e)}function v(){if(window.XMLHttpRequest)return new XMLHttpRequest
try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}}function y(t,e,r){return s(e)?l(e,function(e,r){y(t,e,r)}):t.setRequestHeader(e,r),t}function b(t,e){var r=void 0
return d(e)&&!f(t,"?")&&(t+="?"),l(e,function(e,n){r=e+"="+n+"&",t+=r}),f(t,"&")&&(t=t.slice(0,-1)),t}function m(t){return t>=200&&t<300}function x(t){try{return JSON.parse(t.responseText)}catch(e){return t.responseText}}function j(t){for(var e=t.split(/\r?\n/),r=Object.create(null),n=void 0,i=void 0,s=0,a=e.length;s<a;s++){var o=e[s].split(":")
n=o[0],i=o[1],n&&i&&(r[n.trim()]=i.trim())}return r}function k(t){return g.indexOf(t)>=-1}function O(t){r(t)||(t=window.location.host+t),window.location.assign(t)}function w(t,e,r){return t.call(e,e,r)}Object.defineProperty(e,"__esModule",{value:!0}),e.isAbsoluteUrl=r,e.throwError=n,e.toString=i,e.isObject=s,e.isFunction=a,e.isString=o,e.serialize=u,e.hasProp=h,e.extend=c,e.forIn=l,e.objectSize=d,e.endsWith=f,e.stringContains=p,e.getXHR=v,e.setHeaders=y,e.setParams=b,e.isSuccess=m,e.parseResponseText=x,e.parseHeaders=j,e.methodShouldHavePayload=k,e.replaceWindowLocation=O,e.callMiddleware=w
var g=["post","patch","put"],_=/^https?:\/\//i
e.types={html:"text/html",json:"application/json",xml:"application/xml",form:"application/x-www-form-urlencoded"},e.serializers={"application/x-www-form-urlencoded":u,"application/json":JSON.stringify}},function(t,e,r){"use strict"
function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0})
var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r]
n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=r(2),a=function(){function t(e,r,i){return n(this,t),this.method=e,this.request=i,this.xhr=r,this.url=this.xhr.responseURL,this.statusText=this.xhr.statusText,this.headers=(0,s.parseHeaders)(this.xhr.getAllResponseHeaders()),this.setMethod(e),this.setStatus(this.xhr.status),this.type=this.xhr.getResponseHeader("content-type"),this.text=this.xhr.responseText,this.body=this.parse(),this}return i(t,[{key:"parse",value:function(){return"head"==this.method?this.xhr.responseText||null:this.request.parser?this.request.parser(this.xhr.responseText,this):(0,s.parseResponseText)(this.xhr)}},{key:"setMethod",value:function(t){return this.get="get"==t,this.post="post"==t,this.put="put"==t,this.patch="patch"==t,this.head="head"==t,this.del="delete"==t,this.options="options"==t,this}},{key:"setStatus",value:function(t){var e=t/100|0
return this.status=t,this.statusType=e,this.ok=2==e,this.info=1==e,this.clientError=4==e,this.serverError=5==e,this.error=!!this.clientError||!!this.serverError,this.notFound=404==this.status,this.accepted=202==this.status,this.forbidden=403==this.status,this.badRequest=400==this.status,this.unauthorized=401==this.status,this.notAcceptable=406==this.status,this.noContent=204==this.status||1223==this.status,this}},{key:"redirect",value:function(t){return(0,s.replaceWindowLocation)(t),this}},{key:"urlContains",value:function(t){return(0,s.stringContains)(this.url,t)}}]),t}()
e.default=a}])})
